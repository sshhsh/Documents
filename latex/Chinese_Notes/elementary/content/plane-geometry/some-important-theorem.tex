
\section{几个重要的定理}
\label{sec:some-import-plane-geometry-theorem}

本节讲述几个在平面几何中占有重要地位的定理。

\subsection{张角定理}
\label{sec:spread-angle-theorem}

\begin{theorem}[张角定理]
  在三角形$ABC$中，$D$是$BC$边上任意一点，有下式成立:
  \begin{equation}
    \label{eq:spread-angle-theorem}
    \frac{\sin{\angle{BAC}}}{AD} = \frac{\sin{\angle{CAD}}}{AB} + \frac{\sin{\angle{BAD}}}{AC}
  \end{equation}
\end{theorem}

张角定理的逆也是成立的，即如果平面上四个点满足定理中的等式，就有$B$、$C$、$D$三点共线，这也可以用来处理共线问题。

  \begin{figure}[htbp]
  \centering
\includegraphics{content/plane-geometry/pic/spread-angle-theorem.pdf}
\caption{张角定理}
\label{fig:spread-angle-theorem}
\end{figure}

\begin{proof}[证明一]
  因为$S_{\triangle ABC} = S_{\triangle ABD} + S_{\triangle ACD}$，所以
  \begin{equation*}
    \frac{1}{2}AB \cdot AC \cdot \sin{\angle BAC} =
    \frac{1}{2}AB \cdot AD \cdot \sin{\angle BAD} +
    \frac{1}{2}AC \cdot AD \cdot \sin{\angle CAD} 
  \end{equation*}
  两边同除以$\frac{1}{2}AB \cdot AC \cdot AD$即得证。
\end{proof}

\begin{proof}[证明二]
  由正弦定理有 $AB \sin{\angle BAC} = BC \sin{\angle ACB}$以及$AD \sin{\angle CAD} = CD \sin{\angle ACD}$，两式相除得
  \[
    \frac{\sin{\angle CAD}}{\sin{\angle BAC}} \cdot \frac{AD}{AB} = \frac{CD}{BC}
  \]
  同理也有
  \[
    \frac{\sin{\angle BAD}}{\sin{\angle BAC}} \cdot \frac{AD}{AC} = \frac{BD}{BC}
  \]
  两式相加再整理即得定理中等式。
\end{proof}

\begin{example}[三角形的角平分线长度公式]
  我们利用张角定理来建立三角形的内角平分线长度与三边的关系，假若在\autoref{fig:spread-angle-theorem}中，$AD$正好平分$\angle BAC$，其长度设为$\omega_a$，并设三个顶点$A$、$B$、$C$所对的边长分别为$a$、$b$、$c$，再设$\angle BAC=2\theta$，那么由张角定理，有
  \[ \frac{\sin{2\theta}}{\omega_a} = \frac{\sin{\theta}}{b}+\frac{\sin{\theta}}{b} \]
  于是
  \begin{equation}
    \label{eq:spread-angle-for-bisection}
  \frac{2\cos{\theta}}{\omega_a} = \frac{1}{b} + \frac{1}{c}
  \end{equation}
  而由半角公式和余弦定理，有
  \begin{eqnarray*}
    \cos{\theta} & = & \sqrt{\frac{1+\cos{2\theta}}{2}} \\
                 & = & \sqrt{\frac{1+\frac{b^2+c^2-a^2}{2bc}}{2}} \\
    & = & \sqrt{\frac{(b+c)^2-a^2}{4bc}}
  \end{eqnarray*}
  所以最后
  \[ \omega_a = \sqrt{bc \left( 1- \left( \frac{a}{b+c} \right)^2 \right)} \]
  这就是三角形的内角平分线长度公式。

  由\autoref{eq:spread-angle-for-bisection}还可得不等式$\omega_a < H(b,c)$，这里$H$表调和平均数。
\end{example}

\subsection{梅涅劳斯(Menelaus)定理}
\label{sec:menelaus-theorem}

\begin{theorem}[梅涅劳斯定理]
  设$X$、$Y$、$Z$是三角形$ABC$的三边$AB$、$BC$、$CA$或其延长线上的点，其中有奇数个点在边的延长线上，则此三点共线的充分必要条件是下式成立:
  \begin{equation}
    \label{eq:menelaus-theorem}
    \frac{AX}{XB} \cdot \frac{BY}{YC} \cdot \frac{CZ}{ZA} = 1
 \end{equation}
\end{theorem}
 
\begin{figure}[htbp]
\centering
\includegraphics{content/plane-geometry/pic/menelaus-theorem.pdf}
\includegraphics{content/plane-geometry/pic/menelaus-theorem2.pdf}
\caption{梅涅劳斯定理}
\label{fig:menelaus-theorem}
\end{figure}
 
%\begin{figure}[htbp]
%\centering
%\includegraphics{content/plane-geometry/pic/menelaus-theorem2.pdf}
%\caption{梅涅劳斯定理:三个点都在边的延长线上的情形}
%\label{fig:menelaus-theorem2}
%\end{figure}

只证明必要性，得证之后利用同一法即可轻松得到充分性的证明。
最精巧的是下面这个辅助线的证明
\begin{proof}[证明一]
  过$C$作$XYZ$的平行线，与边$AB$相交于点$P$，那么有
 
\begin{figure}[htbp]
\centering
\includegraphics{content/plane-geometry/pic/menelaus-theorem-proof.pdf}
\includegraphics{content/plane-geometry/pic/menelaus-theorem-proof2.pdf}
\caption{梅涅劳斯定理的证明}
\label{fig:menelaus-theorem-proof}
\end{figure}
 
%\begin{figure}[htbp]
%\centering
%\includegraphics{content/plane-geometry/pic/menelaus-theorem-proof2.pdf}
%\caption{梅涅劳斯定理的证明}
%\label{fig:menelaus-theorem-proof2}
%\end{figure}

  \begin{equation*}
    \frac{AX}{XB} \cdot \frac{BY}{YC} \cdot \frac{CZ}{ZA} =
    \frac{AX}{XB} \cdot \frac{BX}{XP} \cdot \frac{PX}{XA} = 1
  \end{equation*}
所以必要性成立，充分性利用同一法即可得证，略去。
\end{proof}

另外一种辅助线的作法是分别过三角形的三个顶点向直线$XYZ$引垂线，剩下的过程与上面类似，此处就不再详述了。

面积方法仍然是行之有效的手段:
\begin{proof}[证明二]
  \begin{equation*}
    \frac{AX}{XB} \cdot \frac{BY}{YC} \cdot \frac{CZ}{ZA} =
    \frac{S_{\triangle AYX}}{S_{\triangle BYX}} \cdot
    \frac{S_{\triangle BYX}}{S_{\triangle CYX}} \cdot
    \frac{S_{\triangle CYX}}{S_{\triangle AYX}} = 1
  \end{equation*}
\end{proof}

再给一个向量方法的证明:
\begin{proof}[证明三]
  记$\vv{AX}=\lambda_1\vv{XB}$, $\vv{BY}=\lambda_2\vv{YC}$, $\vv{CZ}=\lambda_3\vv{ZA}$，则有
  \begin{equation*}
    \vv{XZ} = \vv{AZ}-\vv{AX}=\frac{1}{1+\lambda_3}\vv{AC}-\frac{\lambda_1}{1+\lambda_1}\vv{AB}
  \end{equation*}
  同时
  \begin{eqnarray*}
    \vv{XY} &=& \vv{AY} - \vv{AX} = \left( \frac{1}{1+\lambda_2}\vv{AB}+\frac{\lambda_2}{1+\lambda_2}\vv{AC} \right) - \frac{\lambda_1}{1+\lambda_1}\vv{AB} \\
    &=& \left( \frac{1}{1+\lambda_2}-\frac{\lambda_1}{1+\lambda_1} \right)\vv{AB}+\frac{\lambda_2}{1+\lambda_2}\vv{AC} 
  \end{eqnarray*}
这两个向量共线的充分必要条件是上面这两组系数对应成比例，经过计算即为等式$\lambda_1\lambda_2\lambda_3=-1$，因为是有奇数个点在边的延长线上，所以它等价于定理中的等式。
\end{proof}

从向量形式中我们得到了梅涅劳斯定理的向量表达: $\lambda_1\lambda_2\lambda_3=-1$，而且向量形式的证明，充分性与必要性是统一的。

\begin{example}
  \label{example:external-common-tangent-for-3-circle}
  考虑三个半径两两不同的圆，有三组外公切线，每两个圆的一组外公切线都有一个交点，这样的交点有三个，今将说明这三点共线\footnote{这个例子及证法来自于参考文献\cite{kuing-problem-elementary-math-note}}。
 
\begin{figure}[htbp]
\centering
\includegraphics{content/plane-geometry/pic/external-common-tangent-for-3-circle.pdf}
\caption{三个半径两两不同的圆的三组外公切线交点共线}
\label{fig:external-common-tangent-for-3-circle}
\end{figure}

如图\ref{fig:external-common-tangent-for-3-circle}，易知$P$、$Q$、$R$三点在三个圆心形成的三角形的三条边的延长线上，而$\frac{PA}{PB}=\frac{r_A}{r_B}$，仿此有另外两式，三式相乘即知这满足梅涅劳斯定理中的等式，所以这三点共线。

 这结论还有另外一种解释，把这三个圆看成三个球，这三个球有公切面（实际上有两个），这三个点$P$、$Q$、$R$将同时位于这公切面和三个球心所决定的平面上，从而位于两个平面的交线上（三个球半径两两不等，所以这两个平面必定相交）。那这三个点为什么在公切面上呢，可以这样理解，每两个球有一个公切圆锥，三个公切圆锥的顶点就是这三个点，而这三个圆锥与前述公切面必定都相切于一条圆锥的母线，所以作为圆锥顶点必定在这条母线上，也就在公切面上。
\end{example}

\begin{example}[梅涅劳斯定理的推广\footnote{这个推广来自于参考文献\cite{geometry-treasure}.}及三角形内接三角形的最大面积]
  我们先把梅涅劳斯定理推广成如下的结论: 在三角形$ABC$中，点$D$、$E$、$F$分别是三边$BC$、$CA$、$AB$所在直线上的点，设$\vv{BD}=\lambda_1\vv{DC}$，$\vv{CE}=\lambda_2\vv{EA}$，$\vv{AF}=\lambda_3\vv{FB}$，则有面积比
  \begin{equation*}
    \frac{S_{\triangle DEF}}{S_{\triangle ABC}} = \frac{1+\lambda_1\lambda_2\lambda_3}{(1+\lambda_1)(1+\lambda_2)(1+\lambda_3)}
  \end{equation*}
  上式中的 $S_{\triangle DEF}$ 是有向面积，有正负号。
 
\begin{figure}[htbp]
\centering
\includegraphics{content/plane-geometry/pic/menelaus-theorem-extends.pdf}
\caption{梅涅劳斯定理的推广}
\label{fig:menelaus-theorem-extends}
\end{figure}

\begin{proof}[证明]
  先证明三个点分别在三条边上的情况，这时$\lambda_i>0(i=1,2,3)$，显然有$S_{\triangle DEF} = S_{\triangle ABC} - (S_{\triangle AEF}+S_{\triangle BDF}+S_{\triangle CED})$，而
  \begin{equation*}
    \frac{S_{\triangle AEF}}{S_{\triangle ABC}} = \frac{AF}{AB} \cdot \frac{AE}{AC} = \frac{\lambda_1}{1+\lambda_1} \cdot \frac{1}{1+\lambda_3}
  \end{equation*}
  同理还有
  \begin{equation*}
   \frac{S_{\triangle BDF}}{S_{\triangle ABC}} = \frac{\lambda_2}{(1+\lambda_2)(1+\lambda_1)}, \  \frac{S_{\triangle CED}}{S_{\triangle ABC}} = \frac{\lambda_3}{(1+\lambda_3)(1+\lambda_2)} 
 \end{equation*}
 于是便可得结论。

 对于有点在边的延长线上的情况，此时需要将面积$S_{\triangle AEF}$、$S_{\triangle BDF}$、$S_{\triangle CFD}$、$S_{\triangle DEF}$理解为有向面积，于是关系式$S_{\triangle DEF} = S_{\triangle ABC} - (S_{\triangle AEF}+S_{\triangle BDF}+S_{\triangle CED})$仍然成立，所以结论也是成立的。
\end{proof}

在三个点$D$、$F$、$F$都在边上而非延长线上的情形，三角形$DEF$称为三角形$ABC$的内接三角形，利用刚证明的结论，我们可以考虑三角形的内接三角形的最大面积问题。

\end{example}

\subsection{塞瓦(Ceva)定理}
\label{sec:cevian-theorem}

\begin{theorem}[塞瓦定理]
  在三角形$ABC$中，点$X$、$Y$、$Z$分别是三边$AB$、$BC$、$CA$或其延长线上的点，其中有偶数个点在边的延长线上，则三条线段$AY$、$BZ$、$CX$交于一点$P$或者相互平行的充分必要条件是
  \begin{equation}
    \label{eq:cevian-theorem}
    \frac{AX}{XB} \cdot \frac{BY}{YC} \cdot \frac{CZ}{ZA} = 1
  \end{equation}
\end{theorem}
 
\begin{figure}[htbp]
\centering
\includegraphics[scale=0.8]{content/plane-geometry/pic/cevian-theorem.pdf}
\includegraphics[scale=0.8]{content/plane-geometry/pic/cevian-theorem2.pdf}
\includegraphics[scale=0.8]{content/plane-geometry/pic/cevian-theorem3.pdf}
\caption{塞瓦定理}
\label{fig:cevian-theorem}
\end{figure}

三线平行也可以视为相交于无穷远的点。

同样只证明必要性，第一个证明是直接使用了梅涅劳斯定理:
\begin{proof}[证明一]
  对三角形$ABY$和截线$XPC$使用梅涅劳斯定理得
  \begin{equation*}
    \frac{AX}{XB} \cdot \frac{BC}{CY} \cdot \frac{YP}{PA} = 1
  \end{equation*}
  再对三角形$ACY$和截线$BPZ$使用梅涅劳斯定理得
  \begin{equation*}
    \frac{YB}{BC} \cdot \frac{CZ}{ZA} \cdot \frac{AP}{PY} = 1
  \end{equation*}
  两式相乘即得塞瓦定理。
\end{proof}

面积方法仍然是最直接的:
\begin{proof}[证明二]
  \begin{equation*}
    \frac{AX}{XB} \cdot \frac{BY}{YC} \cdot \frac{CZ}{ZA} =
    \frac{S_{\triangle CPA}}{S_{\triangle CPB}} \cdot
    \frac{S_{\triangle APB}}{S_{\triangle APC}} \cdot
    \frac{S_{\triangle BPC}}{S_{\triangle BPA}} = 1
  \end{equation*}
\end{proof}

同样有向量方法
\begin{proof}[证明三]
  仍然记$\vv{AX}=\lambda_1\vv{XB}$，$\vv{BY}=\lambda_2\vv{YC}$，$\vv{CZ}=\lambda_3\vv{ZA}$，有
  \begin{equation*}
    \vv{AX}=\frac{\lambda_1}{1+\lambda_{1}}\vv{AB}, \ \vv{AZ}=\frac{1}{1+\lambda_3}\vv{AC}
  \end{equation*}
  因为点$P$是$BZ$与$CX$的交点，所以存在两个实数$s$和$t$，使得
  \begin{eqnarray*}
    \vv{AP} &=& (1-s)\vv{AB}+s\vv{AZ} = (1-s)\vv{AB}+\frac{s}{1+\lambda_3}\vv{AC} \\
    \vv{AP} &=& (1-t)\vv{AC}+t\vv{AX} =  \frac{t\lambda_1}{1+\lambda_{1}}\vv{AB}+(1-t)\vv{AC}
  \end{eqnarray*}
  于是得方程组
  \begin{eqnarray}
    1-s &=&  \frac{t\lambda_1}{1+\lambda_{1}} \\
    \frac{s}{1+\lambda_3} &=& 1-t
  \end{eqnarray}
  解之得
  \begin{equation*}
    t = 1- \frac{1}{(1+\lambda_1)(1+\lambda_3)-\lambda_1}
  \end{equation*}
  所以
 \[ \vv{AP} = \frac{\lambda_1\lambda_3}{1+\lambda_3+\lambda_1\lambda_3} \vv{AB} + \frac{1}{1+\lambda_3+\lambda_1\lambda_3} \vv{AC} \]
  另一方面有
  \begin{equation*}
    \vv{AY}=\frac{1}{1+\lambda_2}\vv{AB}+\frac{\lambda_2}{1+\lambda_2}\vv{AC}
  \end{equation*}
  于是$\vv{AP}$与$\vv{AY}$共线的充分必要条件是两组系数成比例，而上面两个式子中的系数比分别为$\lambda_1\lambda_3 : 1$和$1 : \lambda_2$，所以得到$\lambda_1\lambda_2\lambda_3=1$，即得证。
\end{proof}

\begin{example}[梅涅劳斯定理与塞瓦定理的统一]
根据这证明过程，实际上梅涅劳斯定理和塞瓦定理可以统一起来：假定$X$、$Y$、$Z$是三角形$ABC$三边$AB$、$BC$、$CA$或它们的延长线上的点，有分比$\vv{AX}=\lambda_1\vv{XB}$，$\vv{BY}=\lambda_2\vv{YC}$，$\vv{CZ}=\lambda_3\vv{ZA}$，那么这三点共线的充分必要条件是$\lambda_1\lambda_2\lambda_3=-1$（梅涅劳斯定理），而$AY$、$BZ$、$CX$三线共点的充分必要条件是$\lambda_1\lambda_2\lambda_3=1$（塞瓦定理）。
\end{example}

\begin{example}[三角形的几个心及其向量表达]
 利用塞瓦定理，我们知道三角形的三条中线是交于同一点的，该点称为三角形的 \emph{重心}。

 同样，利用塞瓦定理和三角形内角平分线定理，还可以知道三角形的三条内角平分线也是交于同一点的，这点称为三角形的 \emph{内心}，它是三角形内切圆圆心。

 对于三角形的一个角的内角平分线和另外两个角的外角平分线，根据三角形的内外角平分线定理，可得这三线也是相交于同一点的，这一点称为三角形的 \emph{旁心}，它是旁切圆的圆心。

 对于三条高线，假定$BC$边上的高线垂足是$D$，则有$\frac{BD}{CD}=\frac{c \cos{B}}{b \cos{C}}$，仿此有另外两式，三式相乘并根据塞瓦定理即知三条高也相交于同一点，称该点为三角形的 \emph{垂心}。

这四个心再加上三角形的\emph{外心}(三边的中垂线交点)，合称为三角形的五心。 

而且，在塞瓦定理的向量形式的证明过程中已经得出点$P$的向量表达
 \[ \vv{AP} = \frac{\lambda_1\lambda_3}{1+\lambda_3+\lambda_1\lambda_3} \vv{AB} + \frac{1}{1+\lambda_3+\lambda_1\lambda_3} \vv{AC} \]
 或者将它改写为以平面上任一点$O$为起点的向量方程
 \[ \vv{OP} = \frac{\lambda_3}{1+\lambda_3+\lambda_1\lambda_3} \vv{OA} + \frac{\lambda_1\lambda_3}{1+\lambda_3+\lambda_1\lambda_3} \vv{OB} + \frac{1}{1+\lambda_3+\lambda_1\lambda_3} \vv{OC} \]
 还可以将其中向量全部改写为以$P$为起点的向量方程，即
 \[ \lambda_3 \vv{PA} + \lambda_1 \lambda_3 \vv{PB} + \vv{PC} = \bm{0} \]
 这三个向量方程都是由塞瓦定理确定出的点$P$的向量表达，其中最后一种较为简洁，在此利用它来表达三角形的五心。

 首先对于重心$G$，显然$\lambda_1=\lambda_2=\lambda_3=1$，因此
 \[ \vv{OG} = \frac{1}{3} (\vv{OA} + \vv{OB} + \vv{OC}) \]
 或者写成
 \[ \vv{GA} + \vv{GB} + \vv{GC} = \bm{0} \]
 而对于内心$I$，$\lambda_1 = b/a$，$\lambda_2=c/b$，$\lambda_3=a/c$，因而
 \[ \vv{OI} = \frac{a}{a+b+c} \vv{OA} + \frac{b}{a+b+c} \vv{OB} + \frac{c}{a+b+c} \vv{OC} \]
 或者写成
 \[ a\vv{IA} + b \vv{IB} + c\vv{IC} = \bm{0} \]
 对于$BC$边上的旁心$I_A$，有$\lambda_1=-b/a$，$\lambda_2=c/b$，$\lambda_3=-a/c$，所以
 \[ \vv{OI_A} = \frac{-a}{-a+b+c} \vv{OA} + \frac{b}{-a+b+c} \vv{OB} + \frac{c}{-a+b+c} \vv{OC} \]
 同样可以写成
 \[ -a \vv{I_AA} + b \vv{I_AB} + c\vv{I_AC} = \bm{0} \]
 对于垂心$H$，$\lambda_1=b\cos{A}/a\cos{B}$, $\lambda_2=c\cos{B}/b\cos{C}$,$\lambda_3=a\cos{C}/c\cos{A}$，于是
 \[ \vv{OH} = \frac{a \cos{B}\cos{C} \vv{OA} + b \cos{C}\cos{A} \vv{OB} + c \cos{A}\cos{B} \vv{OC}}{a\cos{B}\cos{C}+b\cos{C}\cos{A}+c\cos{A}\cos{B}} \]
 注意到$a \cos{B}\cos{C} : b \cos{C}\cos{A} : c \cos{A}\cos{B} = \tan{A} : \tan{B} : \tan{C}$，于是这式子还可以写为
 \[ \tan{A} \vv{HA} + \tan{B} \vv{HB} + \tan{C} \vv{HC} = \bm{0} \]
 对于外心$O$，$\lambda_1=b\cos{B}/a\cos{A}$,$\lambda_2=c\cos{C}/b\cos{B}$,$\lambda_3=a\cos{A}/c\cos{C}$，所以(这里点$O$是外心，任意点换成了点$M$)
 \[ \vv{MO} = \frac{a\cos{A}\vv{MA}+b\cos{B}\vv{MB}+c\cos{C}\vv{MC}}{a\cos{A}+b\cos{B}+c\cos{C}} \]
 同样注意到$a\cos{A} : b\cos{B} : c\cos{C} = \sin{2A} : \sin{2B} : \sin{2C}$，所以式子可以写为
 \[ \sin{2A} \vv{OA} + \sin{2B} \vv{OB} + \sin{2C} \vv{OC} = \bm{0} \]
 这便是三角形五心的向量表达，进一步，利用向量的坐标，便可以得出五心的坐标公式，此处不再叙述。
\end{example}

\begin{example}
  仿照例\ref{example:external-common-tangent-for-3-circle}，把那里的外公切线改为内公切线，那么图\ref{fig:internal-common-tangent-for-3-circle}中的三线共点。
 
\begin{figure}[htbp]
\centering
\includegraphics{content/plane-geometry/pic/internal-common-tangent-for-3-circle.pdf}
\caption{三个半径两两不同的圆的三组内公切线交点形成的塞瓦三线}
\label{fig:internal-common-tangent-for-3-circle}
\end{figure}

因为$\frac{AP}{PB}=\frac{r_A}{r_B}$，同样有另外两式，三式相乘后由塞瓦定理知三线共点。
\end{example}

\begin{example}
  如图\ref{fig:ceva-circle}，圆周上有顺次六个点$A$、$B$、$C$、$D$、$E$、$F$，那么三条线段$AD$、$BE$、$CF$交于一点的充分必要条件是
  \begin{equation*}
    \frac{AB}{BC} \cdot \frac{CD}{DE} \cdot \frac{EF}{FA} = 1
  \end{equation*}
 
\begin{figure}[htbp]
\centering
\includegraphics{content/plane-geometry/pic/ceva-circle.pdf}
\caption{}
\label{fig:ceva-circle}
\end{figure}

证明是很容易的，连接$AC$、$CE$、$EA$，对三角形$ACE$使用塞瓦定理就有
\begin{equation*}
  \frac{AX}{XC} \cdot \frac{CY}{YE} \cdot \frac{EZ}{ZA} = 1
\end{equation*}
但是又有
\begin{equation*}
  \frac{AX}{XC} = \frac{AB \sin{\angle ABX}}{BC \sin{\angle CBX}}
\end{equation*}
仿此有另外两式，三式相乘并利用 $\angle ABX = \angle EDY$等一系列等角，即可得结论的必要性，而充分性仍然由同一法得出，略去。
\end{example}

\begin{example}[塞瓦定理的一个推广\footnote{这个推广来自于参考文献\cite{geometry-treasure}.}]
  塞瓦定理可以推广成如下的结论：在三角形$ABC$中，点$D$、$E$、$F$分别是三边$BC$、$CA$、$AB$上的点，有比例$\vv{AF}=\lambda_1\vv{FB}$，$\vv{BD}=\lambda_2\vv{DC}$，$\vv{CE}=\lambda_3\vv{EA}$，$BE$与$CF$相交于点$X$， $CF$与$AD$相交于$Y$， $AD$与$BE$相交于$Z$，则有
  \begin{equation*}
    \frac{S_{\triangle XYZ}}{S_{\triangle ABC}} = \frac{(\lambda_1\lambda_2\lambda_3-1)^2}{(1+\lambda_1+\lambda_1\lambda_2)(1+\lambda_2+\lambda_2\lambda_3)(1+\lambda_3+\lambda_3\lambda_1)}
  \end{equation*}
  
\begin{figure}[htbp]
\centering
\includegraphics{content/plane-geometry/pic/ceva-theorem-extends.pdf}
\caption{塞瓦定理的一个推广}
\label{fig:ceva-theorem-extends}
\end{figure}

\begin{proof}[证明]
  如图\ref{fig:ceva-theorem-extends}，显然有$S_{\triangle XYZ} = S_{\triangle ABC} - (S_{\triangle ABZ} + S_{\triangle BCX} + S_{\triangle CAY})$，于是只要求出此式中被减掉的那三个三角形的面积就行了，因为
  \begin{equation*}
    S_{\triangle ABZ} = \frac{BZ}{BE} S_{\triangle ABE} = \frac{BZ}{BE} \cdot \frac{AE}{AC} S_{\triangle ABC}
  \end{equation*}
  式中$AE/AC$是容易求的，$BZ/BE$可以对三角形$BCE$和截线$AZD$使用梅涅劳斯定理得
  \begin{equation*}
    \frac{BZ}{ZE} \cdot \frac{EA}{AC} \cdot \frac{CD}{DB} = 1
  \end{equation*}
  所以
  \begin{equation*}
    \frac{BZ}{ZE} = \lambda_2(1+\lambda_3)
  \end{equation*}
  从而
  \begin{equation*}
    \frac{BZ}{BE} = \frac{\lambda_2(1+\lambda_3)}{1+\lambda_2(1+\lambda_3)}
  \end{equation*}
  所以最终
  \begin{equation*}
    \frac{S_{\triangle ABZ}}{S_{\triangle ABC}} = \frac{BZ}{BE} \cdot \frac{AE}{AC} = \frac{\lambda_2}{(1+\lambda_2+\lambda_2\lambda_3)}
  \end{equation*}
  同样可得另外两式
  \begin{eqnarray*}
    \frac{S_{\triangle BCX}}{S_{\triangle ABC}} & = & \frac{\lambda_3}{1+\lambda_3+\lambda_3\lambda_1} \\
    \frac{S_{\triangle CAY}}{S_{\triangle ABC}} & = & \frac{\lambda_1}{1+\lambda_1+\lambda_1\lambda_2} 
  \end{eqnarray*}
  由此三式即可得结论。
\end{proof}

\end{example}

\begin{example}
  如图\ref{fig:example-for-cevian-ap-perp-bc}，在$\triangle ABC$中，点$D$是角$BAC$的平分线与$BC$边的交点，过$D$向$AB$和$AC$引垂线，垂足分别是$E$、$F$，连接$BF$和$CE$相交于点$P$，今来证明$AP \perp BC$。

\begin{figure}[htbp]
\centering
\includegraphics{content/plane-geometry/pic/example-for-cevian-ap-perp-bc.pdf}
\caption{}
\label{fig:example-for-cevian-ap-perp-bc}
\end{figure}

延长$AP$与$BC$边相交于点$Q$，那么由塞瓦定理有
\begin{equation*}
  \frac{AE}{EB} \cdot \frac{BQ}{QC} \cdot \frac{CF}{FA} = 1
\end{equation*}
另外显然有$AE=AF$，所以由上式得$\frac{BQ}{QC}=\frac{EB}{FC}$，而由几何关系和角平分线定理得
\begin{equation*}
  \frac{EB}{FC} = \frac{BD \cos{B}}{CD \cos{C}} = \frac{AB \cos{B}}{AC \cos{C}}
\end{equation*}
所以
\begin{equation*}
  \frac{BQ}{QC} = \frac{AB \cos{B}}{AC \cos{C}}
\end{equation*}
这说明点$Q$与$BC$边上的高线垂足重合，所以$AP$就是高线。
\end{example}

\begin{example}
 如图\ref{fig:example-for-cevian-ade-equal-adf}，在$\triangle ABC$中，$AD$是$BC$边上的高线，点$P$是这高线上任一点，直线$CP$、$FP$分别与边$AB$、$AC$相交于$E$、$F$，连接$DE$和$DF$，求证$\angle ADE = \angle ADF$。

\begin{figure}[htbp]
\centering
\includegraphics{content/plane-geometry/pic/example-for-cevian-ade-equal-adf.pdf}
\caption{}
\label{fig:example-for-cevian-ade-equal-adf}
\end{figure}

这是某年的全国高中联赛试题，也是一道名题，证法很多，从纯几何方法到坐标方法都有，这里只提供两个利用塞瓦定理的证明。

\begin{proof}[证明一]
由塞瓦定理有
\begin{equation*}
  \frac{AE}{EB} \cdot \frac{BD}{DC} \cdot \frac{CF}{FA} = 1
\end{equation*}
另一方面有
\begin{equation*}
  \frac{AE}{EB} = \frac{S_{\triangle AED}}{S_{\triangle BED}} = \frac{AD \sin{\angle ADE}}{BD \sin{\angle BDE}} = \frac{AD \sin{\angle ADE}}{BD \cos{\angle ADE}}
\end{equation*}
同理有
\begin{equation*}
  \frac{AF}{FC} = \frac{AD \sin{\angle ADF}}{CD \cos{\angle ADF}}
\end{equation*}
这两式相除得
\begin{equation*}
  \frac{AE}{EB} \cdot \frac{BD}{DC} \cdot \frac{CF}{FA} = \frac{\sin{\angle ADE} \cos{\angle ADF}}{\cos{\angle ADE} \sin{\angle ADF}} 
\end{equation*}
将这式子与由塞瓦定理所得式子相比较得$\sin{\angle ADE} \cos{\angle ADF} = \cos{\angle ADE} \sin{\angle ADF}$，于是$\sin{(\angle ADE - \angle ADF)} = 0$，而这两个都是锐角，所以$\angle ADE = \angle ADF$。
\end{proof}

\begin{proof}[证明二]
  如图\ref{fig:example-for-cevian-ade-equal-adf}，过点$A$作$BC$边的平行线，分别与$DE$和$DF$和延长线相交于$T$、$S$，由塞瓦定理
  \begin{equation*}
    \frac{AE}{EB} \cdot \frac{BD}{DC} \cdot \frac{CF}{FA} = 1
  \end{equation*}
  但由于
  \begin{equation*}
    \frac{AE}{EB} = \frac{AT}{BD}, \  \frac{CF}{FA} = \frac{CD}{AS}
  \end{equation*}
  所以得到$AT = AS$，结合$TS \perp AD$知$\angle ADE = \angle ADF$。
\end{proof}
\end{example}

\subsection{斯特瓦尔特(Stewart)定理}
\label{sec:stewart-theorem}

\begin{theorem}[斯特瓦尔特定理]
  在三角形$ABC$中，点$D$是$BC$边上任一点，有下式成立:
  \begin{equation}
    \label{eq:stewart-theorem}
    CD \cdot AB^2 + BD \cdot AC^2 = BC \cdot AD^2 + BD \cdot CD \cdot BC
  \end{equation}
\end{theorem}

\begin{figure}[htbp]
\centering
\includegraphics{content/plane-geometry/pic/stewart-theorem.pdf}
\caption{斯特瓦尔特定理}
\label{fig:stewart-theorem}
\end{figure}

这定理中的等式较长，不太容易记住，写成如下的含比例的式子或许会有所帮助:
\begin{equation}
  \label{eq:stewart-theorem-rate}
  \frac{CD}{BC}\cdot AB^2 + \frac{BD}{BC} \cdot AC^2 = AD^2 + BD \cdot CD
\end{equation}

\begin{proof}[证明一]
  由余弦定理
  \begin{eqnarray*}
    \cos{\angle ADB} & = & \frac{AD^2+BD^2-AB^2}{2 AD \cdot BD} \\
    \cos{\angle ADC} & = & \frac{AD^2+CD^2-AC^2}{2 AD \cdot CD} 
  \end{eqnarray*}
  因为$\angle ADB$与$\angle ADC$互补，所以$\cos{\angle ADB} + \cos{\angle ADC} = 0$，将上两式相加化简就得定理中的等式。
\end{proof}

\begin{proof}[证明二]
  设$\vv{BD}=\lambda \vv{DC}$，则
  \begin{equation*}
    \vv{AD}=\frac{1}{1+\lambda}\vv{AB}+\frac{\lambda}{1+\lambda}\vv{AC}
  \end{equation*}
  将$\lambda$换为$\frac{BD}{DC}$，就是
  \begin{equation*}
    \vv{AD}=\frac{CD}{BC}\vv{AB}+\frac{BD}{BC}\vv{AC}
  \end{equation*}
  两边平方
  \begin{equation*}
    AD^2=\frac{CD^2}{BC^2} \cdot AB^2 + \frac{BD^2}{BC^2} \cdot AC^2 + \frac{ BD \cdot CD}{BC^2} \cdot 2 AB \cdot AC \cdot \cos{\angle BAC}
  \end{equation*}
  利用余弦定理将上式中最后一个余弦值换掉，化简就得定理中的等式。
\end{proof}

\begin{example}
  \label{example:ptolemy-inequality-for-triangle}
  在这个例子中，我们来建立一个有用的不等式，在三角形$ABC$中，点$D$是$BC$边上的异于端点的任意一点，那么有如下不等式成立:
  \begin{equation}
    \label{eq:definite-proportion-inequality}
    AD < \frac{CD}{BC} \cdot AB + \frac{BD}{BC} \cdot AC
  \end{equation}
  或者写成乘积的形式
  \begin{equation*}
    BC \cdot AD < CD \cdot AB + BD \cdot AC
  \end{equation*}
  
  这个不等式与四边形中的托勒密不等式极为相似，实际上它就是四边形退化为三角形的情形，这个例子就是说托勒密不等式在这种情况下仍然成立。

  最简单的是利用向量的证明:
  \begin{proof}[证明一]
  设$\vv{BD}=\lambda\vv{DC}$，那么
  \begin{eqnarray*}
    \vv{AD} & = & \frac{1}{1+\lambda}\vv{AB}+\frac{\lambda}{1+\lambda}\vv{AC} \\
   & = & \frac{CD}{BC}\vv{AB}+\frac{BD}{BC}\vv{AC} 
  \end{eqnarray*}
  由此
  \begin{eqnarray*}
    |\vv{AD}| & = & \left| \frac{CD}{BC}\vv{AB}+\frac{BD}{BC}\vv{AC} \right| \\
              & < & \left| \frac{CD}{BC}\vv{AB} \right| + \left| \frac{BD}{BC}\vv{AC} \right| \\
              & = & \frac{CD}{BC} | \vv{AB} | + \frac{BD}{BC} |\vv{AC} |
  \end{eqnarray*}
  即得证。
  \end{proof}
  
  \begin{proof}[证明二]
    如图\ref{fig:definite-proportion-inequality}，过点$D$分别作边$AC$、$AB$的平行线，分别与$AB$、$AC$相交于点$E$、$F$，有

  \begin{figure}[htbp]
  \centering
\includegraphics{content/plane-geometry/pic/definite-proportion-inequality.pdf}
\caption{}
\label{fig:definite-proportion-inequality}
\end{figure}

\begin{equation*}
  \frac{DC}{BC}AB + \frac{BD}{BC}AC = \frac{AE}{AB} AB + \frac{AF}{AC} AC = AE + AF = AE + ED > AD
\end{equation*}
所以不等式得证。
  \end{proof}

  \begin{proof}[证明三]
  第三个证明就是利用斯特瓦尔特定理，在定理中的等式两边同时除以$BC$，改为如下含比例的等式:
  \begin{eqnarray*}
    AD^2 & = & \frac{CD}{BC} \cdot AB^2 + \frac{BD}{BC} \cdot AC^2 - BD \cdot CD \\
    & = & \frac{CD \cdot BC}{BC^2} \cdot AB^2 + \frac{BD \cdot BC}{BC^2} \cdot AC^2 - BD \cdot CD \\
    & = & \frac{CD \cdot (BD+CD)}{BC^2} \cdot AB^2 + \frac{BD \cdot (BD+CD)}{BC^2} \cdot AC^2 - BD \cdot CD \\
    & = & \frac{CD^2}{BC^2} \cdot AB^2 + \frac{BD^2}{BC^2} \cdot AC^2 + \frac{BD \cdot CD}{BC^2}(AB^2+AC^2-BC^2) \\
    & = & \frac{CD^2}{BC^2} \cdot AB^2 + \frac{BD^2}{BC^2} \cdot AC^2 + \frac{BD \cdot CD}{BC^2} \cdot 2 \cdot AB \cdot AC \cdot \cos{\angle BAC} \\
    & < & \frac{CD^2}{BC^2} \cdot AB^2 + \frac{BD^2}{BC^2} \cdot AC^2 + \frac{BD \cdot CD}{BC^2} \cdot 2 \cdot AB \cdot AC \\
    & = & \left( \frac{CD}{BC}\cdot AB + \frac{BD}{BC} \cdot AC \right)^2
  \end{eqnarray*}
  所以不等式成立。
  \end{proof}

  当点$D$在$BC$边的延长线上时，比如说在$C$这一侧，有什么样的结论呢，这时把点$C$看成在三角形$ABD$的边$BD$上，应用刚证明的不等式，就有
  \begin{equation*}
    BD \cdot AC < CD \cdot AB + BC \cdot AD
  \end{equation*}
  所以
  \begin{equation*}
    AD > -\frac{CD}{BC} AB + \frac{BD}{BC} AC
  \end{equation*}
  这个结果看起来难以记忆，但实际上那两个系数跟点$D$分$\vv{BC}$的比例有关，我们把这结果统一成下面这样:

  \begin{statement}
    在三角形$ABC$中，点$D$是$BC$边所在直线上不与$B$和$C$重合的任一点，设$\vv{BD}=\lambda\vv{DC}$，那么在$\lambda>0$时成立不等式
    \begin{equation}
      \label{eq:definite-proportion-inequality2}
      AD < \frac{1}{1+\lambda} AB + \frac{\lambda}{1+\lambda} AC
    \end{equation}
    在$\lambda<0$时不等式反向。
  \end{statement}
\end{example}

\begin{example}
  在这个例子中，我们利用斯特瓦尔特定理来建立三角形中的中线长公式、角平分线长公式、高线长公式。

  三角形$ABC$的$BC$边上的中线长是
  \begin{equation}
    \label{eq:midline-length-triangle}
    l_{a}^2 = \frac{1}{4}(2b^2+2c^2-a^2)
  \end{equation}
  由此可以继续推得一个不等式$l_a < \frac{1}{2}(b+c)$。

  利用内角平分线定理可求得角平分线分对边的比例，于是可以得出角$A$的平分线长度
  \begin{equation}
    \label{eq:bisec-angle-length-triangle}
    \omega_a^2 = bc \left( 1 - \left( \frac{a}{b+c} \right)^2 \right)
  \end{equation}
  由此可得不等式$\omega < \sqrt{bc}$。

  用斯特瓦尔特定理求高线长比较麻烦，倒是直接使用余弦定理方便:
  \begin{eqnarray*}
    h_a & = & b \sin{C} \\
       & = & b \sqrt{1-\cos^2{C}} \\
       & = & b \sqrt{1-\left( \frac{a^2+b^2-c^2}{2ab} \right)^2} \\
    & = & \frac{1}{a} \sqrt{a^2b^2-\frac{(a^2+b^2-c^2)^2}{4}} \\
    & = & \frac{1}{2a} \sqrt{(a+b+c)(a+b-c)(b+c-a)(c+a-b)}
  \end{eqnarray*}
  这就是高线长公式。

  由于$S_{\triangle ABC} = \frac{1}{2} a \cdot h_a$，再记$p=\frac{1}{2}(a+b+c)$为半周长，那么我们实际上得出了著名的 \emph{海伦公式}:
  \begin{equation*}
    S_{\triangle ABC} = \sqrt{p(p-a)(p-b)(p-c)}
  \end{equation*}

\subsection{托勒密定理与托勒密不等式}
\label{sec:ptolemy-theorem}

\subsection{西姆松定理}
\label{sec:simson-theorem}

\subsection{帕普斯(Pappus)定理}
\label{sec:pappus-theorem}



\subsection{笛沙格定理}
\label{sec:desargues-theorem}



%%% Local Variables:
%%% TeX-master: "../../elementary-math-note"
%%% End:
