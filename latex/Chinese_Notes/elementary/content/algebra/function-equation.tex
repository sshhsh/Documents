
\section{函数方程}
\label{sec:function-equation}

函数方程，顾名思义是关于函数的方程，它是以函数为未知量的方程，例如方程$f(x+y)=f(x)+f(y)$，这个方程中的未知量是函数$f(x)$. 如果某个函数能够满足某一函数方程，则称它是这函数方程的一个解，例如任意奇函数都是函数方程$f(x)+f(-x)=0$的解，求出函数方程的全部解的过程称为解函数方程。

在解函数方程时，有时我们会加上连续性的假设，也就是考虑函数方程的连续解，因为非连续解往往没有通式，而且讨论的意义也不大。

\subsection{柯西方程}
\label{sec:cauchy-function-equality}

这一节介绍柯西研究过的一个函数方程:定义在实数集$R$上的$f(x)$对于任意两个实数$x$和$y$（可以相等）都成立$f(x+y)=f(x)+f(y)$，我们要讨论的问题不外乎几点：这样的函数存在吗？如果存在，是否唯一？函数表达式是否有通式？能否求出？

显然任意正比例函数$f(x)=ax$都满足这函数方程，所以问题是还有没有其它形式的解。

首先取$x=y=0$得出$f(0)=0$，于是$0=f(0)=f(x+(-x))=f(x)+f(-x)$，所以$f(x)$是奇函数。

再令$x=y$得$f(2x)=2f(x)$，不难根据数学归纳法得到，对任意正整数$n$和任意实数$x$，有$f(nx)=nf(x)$，再由$f(x)$是奇函数，知这等式对于负整数也同样成立。

在等式$f(nx)=nf(x)$中取$x=1$，便知对于任意整数$n$，有$f(n)=nf(1)$，也就是说，整个整数集上的函数值，全由$x=1$处的函数值决定。

接着转而讨论有理数的情形，对于整数$p$，有
\[ f(1)=f \left( p\cdot \frac{1}{p} \right) = p f \left( \frac{1}{p} \right) \]
所以
\[ f \left( \frac{1}{p} \right) = \frac{1}{p} f(1) \]
进一步，对于任意有理数$\dfrac{q}{p}$，有
\[ f \left( \frac{q}{p} \right) = f \left( q \cdot \frac{1}{p} \right) = q f \left( \frac{1}{p} \right) = \frac{q}{p} f(1) \]
所以，对于一切有理数$x$，都有
\[ f(x) = x f(1) \]
于是全体有理数集上的函数值，都由$f(1)$所唯一确定。

到目前为止，事情都很顺利，但是当讨论到无理数时，情况就不同了。因为前面之所以顺利，是因为由0和1，经过有限次加减，可得出全体整数，再经过乘除，可以得出全体有理数，但是无理数，却不能这么简单的得出，讨论的函数方程对于开方都无能为力，更不用说对于圆周率$\pi$这样的无理数了。

任意待定一个无理数$\pi$（为了突出它的无理性，选用了圆周率符号，但并不表示圆周率），定义集合$Q_{\pi}={x|x=a+b\pi,a,b\in Q}$，称为由无理数$\pi$生成的无理数集，显然如果$x_1,x_2 \in Q_{\pi}$，则$x_1+x_2$以及$\lambda x_1 (\lambda \in Q)$也都属于这集合，设$x=a+b\pi \in Q_{\pi}$，称$a$为它的有理部分，$b$为它的无理部分（的系数）。

在此定义下，我们将看到，原来的函数方程对于有理数上的取值和无理数上的取值是互相独立的，比如说规定当$x \in Q_{pi}$时，它的函数值等于它的有理部分的函数值，即$f(a+b\pi)=f(a)$，现在来验证，这样定义的函数符合原来的函数方程，这只要验证$x$和$y$中有无理数就行了。

设$x$为有理数，而$y=a+b\pi$为无理数，则$f(x+y)=f((x+a)+b\pi)=f(x+a)=f(x)+f(a)$，而$f(x)+f(y)=f(x)+f(a)$，因此$f(x+y)=f(x)+f(y)$.由交换律，$x$为无理数而$y$为有理数的情形也是成立的。

再设$x_1=a_1+b_1\pi$，$x_2=a_2+b_2\pi$，则$f(x_1+x_2)=f((a_1+a_2)+(b_1+b_2)\pi)=f(a_1+a_2)=f(x_1)+f(x_2)$，这就证明了当$x_1$与$x_2$都是无理数且都从属于同一个$Q_{\pi}$时，函数方程是成立的。

如果$x_1$与$x_2$分属于不同的$Q_{\pi}$.

\subsection{指数方程与对数方程}
\label{sec:exponent-equation-and-logarithm-equation}

指数方程是由指数函数所抽象出的方程: $f(x+y)=f(x)f(y)$，显然零函数和任意指数函数都是它的解，现在讨论的一般解。

直观上来看，如果函数能恒保持正号，则可以在方程两端取对数得
\[ \ln{f(x+y)} = \ln{f(x)} + \ln{f(y)} \]
再令$g(x)=\ln{f(x)}$就有$g(x+y)=g(x)+g(y)$，从而转化为已经研究过的柯西方程，如果$f(x)$又是连续的，那么$g(x)$也是连续的，于是就有$g(x)=mx(m=g(1))$，从而$f(x)=e^{mx}$，令$a=e^m=e^{g(1)}=e^{\ln{f(1)}}=f(1)$，则$f(x)=a^x$.

但这个过程要求函数恒为正，现在从这函数方程出发讨论一下它的符号。令$x=y=0$得$f(0)=f^2(0)$，因此$f(0)=0$或$f(0)=1$，如果$f(0)=0$，则对任意实数$x$都有$f(x)=f(x+0)=f(x)f(0)=0$，即为零函数。在$f(0)=1$的情况下，对于任意实数$x$，有
\[ f(x) = f\left( \frac{x}{2} + \frac{x}{2} \right) = f^2 \left( \frac{x}{2} \right) \geqslant 0 \]
但是我们将指出，上式只能取正，若不然，假定存在某个$x_0$使得$f(x_0)=0$，则对任意实数$x$有$f(x)=f(x_0+(x-x_0))=f(x_0)f(x-x_0)=0$，于是也有$f(0)=0$，与刚才假定的$f(0)=1$矛盾，所以若$f(0)=1$，则函数就恒保持为正。

所以最终的结论是，指数方程的连续解为零函数和全体指数函数。

与指数方程类型，对数方程是由对数函数所抽象出来的函数方程: $f(xy)=f(x)+f(y)$.

还是先考虑一下$f(0)$，虽然对数函数的定义域是正实数集，但单从这个函数方程来说，还是可以考虑一下的。命$x=y=0$即得$f(0)=0$，再取$x$为任意实数而$y=0$，则$f(0)=f(x)+f(0)$对一切实数成立，从而$f(x)$只能为零函数。这就是说，如果要考虑此方程的非零解，则必须将$x=0$从定义域排除掉。

现在假定$f(x)$是连续函数，先考虑函数在正实数上的情形，令$g(x)=f(e^x)$，则$g(x)$也是连续函数，并且$g(x+y)=g(x)+g(y)$，于是$g(x)$是柯西方程的解，$g(x)=g(1)x$，从而$f(x)=g(\ln{x})=\log_a{x}(a=f(e))$.

最后来考虑负数的情形，取$x=y=1$可得$f(1)=0$，于是再取$x=y=-1$则有$f(1)=2f(-1)$，从而$f(-1)=0$，进一步对任意实数$x$就有$f(-x)=f(-1)f(x)=0$，所以一旦考虑到负数区间上，就只能得出零函数的结果。

所以最终的结论是，该函数方程在$R$上的连续解只有零函数，在限定定义域为正实数集上时，对数函数也是它的解。

\subsection{三角方程}
\label{sec:triangle-function-equation}

三角方程是根据三角函数所满足的关系式所提出来的，根据正余函数和余弦函数的和角公式，有
\begin{eqnarray*}
  \cos{(x+y)} & = & \cos{x}\cos{y} - \sin{x}\sin{y} \\
  \sin{(x+y)} & = & \sin{x}\cos{y} + \cos{x}\sin{y}
\end{eqnarray*}

所以很自然的提出如下函数方程：两个函数$C(x)$和$S(x)$，对于任何两个实数$x$和$y$都成立
\begin{eqnarray*}
  C{(x+y)} & = & C(x)C(y) - S(x)S(y) \\
  S{(x+y)} & = & S(x)C(y) + C(x)S(y)
\end{eqnarray*}
显然正弦函数和余弦函数是其一解，所以问题是，是否是唯一解。


\subsection{题选}
\label{sec:exercise-for-function-equation}

\begin{exercise}
  (贵州周奎)
  %\footnote{原帖链接见 http://kuing.orzweb.net/viewthread.php?tid=4817&extra=page%3D1}
  设连续的单调函数$f$:$(-1,+\infty) \to (-1,+\infty)$，满足$f(0)=0$，且$f(x+f(y)+xf(y)) \geqslant y+f(x)+yf(x)$，$\forall x,y \in (-1,+\infty)$，求函数$f(x)$的解析式.
\end{exercise}

\begin{proof}[解答]
这题不好搞，在题目不等式中取$x=0$得到下式恒成立
\[ f(f(y)) \geqslant y \]
如果函数$f(x)$是增函数的话，就必有$f(x) \geqslant x$，因为如果有某个$x_0$使得$f(x_0)<x_0$，那由单调增就有$f(f(x_0))<f(x_0)<x_0$与上式矛盾，所以在增函数的条件下一定有$f(x) \geqslant x$.但对于减函数的情形似乎难以得到类似的结论。

题目之所以难是因为条件中是不等式，那先降低难度，考虑一下如果是等式会怎样，也就是
\[ f(x+f(y)+xf(y)) = y+f(x)+yf(x) \]
因为$f(x)$单调，所以必有反函数，再假设$f(x)$为满射（似乎题意也要求如此），于是在上式中将$y$替换为$f^{-1}(y)$，就成为
\[ f(x+y+xy)=f(x)+f^{-1}(y)+f(x)f^{-1}(y) \]
互换$x$和$y$，又得
\[ f(x+y+xy)=f^{-1}(x)+f(y)+f^{-1}(x)f(y) \]
于是
\[ f(x)+f^{-1}(y)+f(x)f^{-1}(y) = f^{-1}(x)+f(y)+f^{-1}(x)f(y) \]
整理即得
\[ \frac{f(x)-f^{-1}(x)}{1+f(x)}=\frac{f(y)-f^{-1}(y)}{1+f(y)} \] 
因为$x$和$y$是任意的，所以上式意味着
\[  \frac{f(x)-f^{-1}(x)}{1+f(x)}=C \]
右端$C$是常数，但$f(0)=f^{-1}(0)=0$，所以$C=0$，于是得
\[ f(x)=f^{-1}(x) \]
这表明函数$f(x)$的图象是关于直线$y=x$对称的. 将它代回前面的等式就得到
\[ f(x+y+xy)=f(x)+f(y)+f(x)f(y) \]
这个方程很漂亮，可是，似乎也难以转化为柯西方程，到这又没戏了。。。。。

既然还是难，那就进一步加条件，假设函数$f(x)$不但连续，还是一阶可导的，那么有
\[ \frac{f(x+y+xy)-f(x)}{y+xy} = \frac{1+f(x)}{(1+x)} \cdot \frac{f(y)}{y} \]
两边令$y \to 0$，就有
\[ f'(x) =  \frac{1+f(x)}{(1+x)}  \cdot f'(0) \]
这是一个微分方程，至于其中的常数$f'(0)$，因为$f(x)=f^{-1}(x)$，所以必然有$f'(0)=1$或者$f'(0)=-1$，方程变形为
\[ \frac{y'}{1+y} = C \cdot \frac{1}{1+x} \]
其中$C=1$或者$C=-1$，两边积分得
\[ \ln{(1+y)} = C \ln{(1+x)}+C' \]
这里$C'$是积分常数，所以得到
\[ y= e^{C'} \cdot (1+x)^C - 1 \]
由$f(0)=0$得$C'=0$，所以
\[ f(x)=(1+x)^C-1 \]
其中$C=1$或者$C=-1$，分别对应着$f(x)=x$与$f(x)=-\dfrac{x}{1+x}$，但是要注意，这是在加强了条件（不等式改等式并且要求函数一阶可导）得出的结果.
\end{proof}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../../elementary-math-note"
%%% End:
